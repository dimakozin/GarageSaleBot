version: '1.0'

states:
  none:
    endpoints:
      /start:
        text:
        - '–ü—Ä–∏–≤–µ—Ç! üëã –≠—Ç–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –≥–∞—Ä–∞–∂–Ω–æ–π —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ artspace.sova ü¶â üé®'
        - '–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥'
        - ''
        - '–î–ª—è –ø–æ–º–æ—â–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /help'
        reply_markup:
          ReplyKeyboardMarkup:
            keyboard:
              - row:
                - button:
                    text: "/help"
                - button: 
                    text: "/getCatalog"

      /help:
        text:
        - "ü§ñ –ü–µ—Ä–µ—á–µ–Ω—å –∫–æ–º–∞–Ω–¥ –¥–ª—è –±–æ—Ç–∞:"
        - "/getCatalog - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥"
        - ''
        - "–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ ‚å®Ô∏è"
        reply_markup:
          ReplyKeyboardMarkup:
            keyboard:
              - row:
                - button:
                    text: "/getCatalog"
        drop_state: True

      /getCatalog:
        postActions:
          - "sendCategories"

      default:
        text:
        - '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ –±–æ—Ç–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ üòî'
        - '–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ /help'
        reply_markup:
          ReplyKeyboardMarkup:
            keyboard:
              - row:
                  - button:
                      text: "/help"
        drop_state: True
    
    callbacks:
      getProdFromCategory:
        postActions:
          - "getProdFromCategory"
      
      sendFirstFromCategory:
        postActions:
          - "sendFirstFromCategory"
      
      addCategory:
        middlewares:
          - "IsUserAdmin"
        text:
          - "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:"
          - "–ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ –æ—à–∏–±–∫–µ, –≤–≤–µ–¥–∏—Ç–µ /exit"
        setStateName: addCategory

      addProduct:
        middlewares:
          - "IsUserAdmin"
        text:
          - "–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞"
          - "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞:"
          - "–ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ –æ—à–∏–±–∫–µ, –≤–≤–µ–¥–∏—Ç–µ /exit"
        postActions:
          - "startAddProductProcess"
        setStateName: addProduct

      likeProduct:
        middlewares:
          - "IsUserAdmin"
        postActions:
          - "likeProduct"
  addCategory:
    endpoints:
      /exit:
        text: 
          - "–í–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        dropState: True
        reply_markup:
          ReplyKeyboardMarkup:
            keyboard:
              - row:
                - button:
                    text: "/help"
                - button: 
                    text: "/getCatalog"

      default:
        text:
          - "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞"
          - "/getCatalog - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥"
        postActions:
          - "addCategory"
        dropState: True

  
  addProduct:
    endpoints:
        /exit:
          text: 
            - "–í–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
          dropState: True
          reply_markup:
            ReplyKeyboardMarkup:
              keyboard:
                - row:
                  - button:
                      text: "/help"
                  - button: 
                      text: "/getCatalog"

        /stop:
          text:
            - "–í—ã—à–ª–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤"
            - "/getCatalog - –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É"
          dropState: True
          postActions:
            - "dropBPMUserState"

        default:
          postActions:
            - "addProduct"